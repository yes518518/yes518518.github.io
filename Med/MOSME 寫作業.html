<!DOCTYPE html>
<!-- saved from url=(0275)http://www.mosme.net/homework/start?code=FVLWA&type=start&remark=%E8%8E%8A%D2%89%CD%A0%CD%9C%E5%AE%B6%D2%89%CC%95%CD%9C%E9%96%94%D2%89%CC%95%CC%A7&remark2=813007&subgroupid=AD3E96C3-5D93-4424-8ADA-7E412FA0727B&returnid=29b8f198-1c35-4661-bea7-469c507902cd&subgroupcode=076377 -->
<html lang="en" translate="no"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MOSME 寫作業</title>
    <!-- Font Awesome Web Font 5.11.2-->
    
    <link href="./MOSME 寫作業_files/fontawesome5.5.0.css" rel="stylesheet">
    <!-- Self-Defined CSS & Partial Bootstrap4.3.1 (compiled from exam.scss) -->
    <link href="./MOSME 寫作業_files/exam.css" rel="stylesheet">
    <link href="./MOSME 寫作業_files/loading-animation.min.css" rel="stylesheet">
</head>
<body>
    <div id="app" class="row no-gutters"><div class="col-md-3 col-12"><div id="overview" style="height: 100%;"><!----> <div class="overview-content"><h2 class="mt-0 d-md-inline-block d-none">花蓮程式競賽 中年級組 練習卷</h2> <div class=""><div class="progress_bar"><div class="bar" style="width: 0%;"></div> <p class="m-0 text-center text-white fz14">0/4</p></div> <h6 class="my-1 text-center text-muted fz14 font-weight-normal nowrap">已答題</h6></div> <div class="overflow-auto"><!----> <div class="question-nav"><h3 class="nowrap question-nav-type">問答題</h3> <div class="d-flex flex-md-wrap question-nav-btns"><div class="mx-1 mb-md-2 d-flex flex-column align-items-center"><button class="mybtn navlabel mb-1">
                                        1
                                    </button> <div class="w-75 unremark"></div></div><div class="mx-1 mb-md-2 d-flex flex-column align-items-center"><button class="mybtn navlabel mb-1">
                                        2
                                    </button> <div class="w-75 unremark"></div></div><div class="mx-1 mb-md-2 d-flex flex-column align-items-center"><button class="mybtn navlabel mb-1">
                                        3
                                    </button> <div class="w-75 unremark"></div></div><div class="mx-1 mb-md-2 d-flex flex-column align-items-center"><button class="mybtn navlabel mb-1">
                                        4
                                    </button> <div class="w-75 unremark"></div></div></div></div></div></div></div></div> <div class="col-md-9 col-12"><header><div class="header position-fixed w-75 bg-primary"><div class="d-flex justify-content-between align-items-center p-3"><img src="./MOSME 寫作業_files/mosme_logo_homework.png" alt="MOSME LOGO"> <div class="d-flex align-items-center"><button class="mybtn btn_info btn_submit">繳交作業</button></div></div></div></header> <main class="p-4"><div class="d-flex flex-row-reverse justify-content-between"><!----></div> <!----> <div><h3 class="question_type_heading">問答題</h3> <div class="bg-white question-card mb-4 p-3"><div class="d-flex justify-content-between mb-2"><div><span>1. </span> <span>運用「即時模式」完成程式，當綠旗點一下，Halocode光環板所有的燈亮綠色。 <br><img class="lazy" alt="圖檔" cx="1619250" cy="1619250" style="width:161.925px;height:161.925px;vertical-align:middle" src="./MOSME 寫作業_files/0a80b3ca-5b25-4906-890a-162cac6226da.png"><b> </b><br><b>程式執行方式：</b>切換在即時模式<img class="lazy" alt="圖檔" cx="1333500" cy="638175" style="width:133.35px;height:63.8175px;vertical-align:middle" src="./MOSME 寫作業_files/270ab107-5b66-4d60-99a1-368cbab1c594.png">，點一下綠旗<img class="lazy" alt="圖檔" cx="466725" cy="485775" style="width:46.6725px;height:48.5775px;vertical-align:middle" src="./MOSME 寫作業_files/cb8fe4ee-3a31-470f-a6da-1654a70a319f.png">，程式就開始執行。</span></div> <div class="fz20 nowrap"><i class="fas fa-undo-alt mr-1"></i> <i class="far fa-bookmark pointer"></i></div></div> <div class="border p-2 rounded"><div contenteditable="true" class="textarea"></div> <div class="mt-3"><div class="row"></div></div></div> <div class="d-flex justify-content-end align-items-center pt-2"><span class="text-muted fz14 mr-2">上傳檔案</span> <label class="upload"><input type="file" multiple="multiple" accept=".jpg,.png,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.pdf" class="d-none"> <i class="fas fa-file-alt"></i></label></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body text-center"><h3 class="text-danger">作答將被清空</h3> <h3>確定要重置嗎?</h3></div> <div class="modal-footer justify-content-center"><button type="button" class="mybtn bg-secondary text-white px-4 mx-1">取消</button> <button type="button" class="mybtn bg-info text-white px-4 mx-1">重置</button></div></div></div></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content mx-auto" style="width: unset;"><div class="modal-body text-center"><img src="http://www.mosme.net/homework/start?code=FVLWA&amp;type=start&amp;remark=%E8%8E%8A%D2%89%CD%A0%CD%9C%E5%AE%B6%D2%89%CC%95%CD%9C%E9%96%94%D2%89%CC%95%CC%A7&amp;remark2=813007&amp;subgroupid=AD3E96C3-5D93-4424-8ADA-7E412FA0727B&amp;returnid=29b8f198-1c35-4661-bea7-469c507902cd&amp;subgroupcode=076377" alt="" class="w-100"></div> <i class="fas fa-times-circle close_modal"></i></div></div></div></div><div class="bg-white question-card mb-4 p-3"><div class="d-flex justify-content-between mb-2"><div><span>2. </span> <span>運用「即時模式」完成程式，當綠旗點一下，Halocode光環板彩虹燈以順時針從第一顆開始出發顯示繞三圈後，全部紅燈閃爍五次，再重頭開始執行程式，重複無限次執行。 <br><img class="lazy" alt="圖檔" cx="6238875" cy="2952750" style="width:623.8875px;height:295.275px;vertical-align:middle" src="./MOSME 寫作業_files/6b8d5083-2903-48b9-aef9-e88f805c876d.png"> <br><b>程式執行方式：</b>切換在即時模式<img class="lazy" alt="圖檔" cx="1333500" cy="638175" style="width:133.35px;height:63.8175px;vertical-align:middle" src="./MOSME 寫作業_files/191d6b45-1dee-4f2c-bd5d-adb8241130cd.png">，點一下綠旗<img class="lazy" alt="圖檔" cx="466725" cy="485775" style="width:46.6725px;height:48.5775px;vertical-align:middle" src="./MOSME 寫作業_files/4653d21c-ae2a-43d8-b848-482ddbc1b6ac.png">，程式就開始執行。</span></div> <div class="fz20 nowrap"><i class="fas fa-undo-alt mr-1"></i> <i class="far fa-bookmark pointer"></i></div></div> <div class="border p-2 rounded"><div contenteditable="true" class="textarea"></div> <div class="mt-3"><div class="row"></div></div></div> <div class="d-flex justify-content-end align-items-center pt-2"><span class="text-muted fz14 mr-2">上傳檔案</span> <label class="upload"><input type="file" multiple="multiple" accept=".jpg,.png,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.pdf" class="d-none"> <i class="fas fa-file-alt"></i></label></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body text-center"><h3 class="text-danger">作答將被清空</h3> <h3>確定要重置嗎?</h3></div> <div class="modal-footer justify-content-center"><button type="button" class="mybtn bg-secondary text-white px-4 mx-1">取消</button> <button type="button" class="mybtn bg-info text-white px-4 mx-1">重置</button></div></div></div></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content mx-auto" style="width: unset;"><div class="modal-body text-center"><img src="http://www.mosme.net/homework/start?code=FVLWA&amp;type=start&amp;remark=%E8%8E%8A%D2%89%CD%A0%CD%9C%E5%AE%B6%D2%89%CC%95%CD%9C%E9%96%94%D2%89%CC%95%CC%A7&amp;remark2=813007&amp;subgroupid=AD3E96C3-5D93-4424-8ADA-7E412FA0727B&amp;returnid=29b8f198-1c35-4661-bea7-469c507902cd&amp;subgroupcode=076377" alt="" class="w-100"></div> <i class="fas fa-times-circle close_modal"></i></div></div></div></div><div class="bg-white question-card mb-4 p-3"><div class="d-flex justify-content-between mb-2"><div><span>3. </span> <span><b>題目：</b>運用「即時模式」完成程式，當綠旗點一下，Halocode光環板燈全暗，每2秒會增加紅光20％亮度，加到100％後停止。 <br><img class="lazy" alt="圖檔" cx="6343650" cy="1019175" style="width:634.365px;height:101.9175px;vertical-align:middle" src="./MOSME 寫作業_files/aab0dc7d-7fb5-4158-9691-7848e2a52679.png"> <br><b>程式執行方式：</b>切換在即時模式<img class="lazy" alt="圖檔" cx="1333500" cy="638175" style="width:133.35px;height:63.8175px;vertical-align:middle" src="./MOSME 寫作業_files/9a30b806-28f3-4037-8b57-15f6a6fa8495.png">，點一下綠旗<img class="lazy" alt="圖檔" cx="466725" cy="485775" style="width:46.6725px;height:48.5775px;vertical-align:middle" src="./MOSME 寫作業_files/5c550b3e-d7a5-4eae-bab6-8d48f64cfcd3.png">，程式就開始執行。</span></div> <div class="fz20 nowrap"><i class="fas fa-undo-alt mr-1"></i> <i class="far fa-bookmark pointer"></i></div></div> <div class="border p-2 rounded"><div contenteditable="true" class="textarea"></div> <div class="mt-3"><div class="row"></div></div></div> <div class="d-flex justify-content-end align-items-center pt-2"><span class="text-muted fz14 mr-2">上傳檔案</span> <label class="upload"><input type="file" multiple="multiple" accept=".jpg,.png,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.pdf" class="d-none"> <i class="fas fa-file-alt"></i></label></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body text-center"><h3 class="text-danger">作答將被清空</h3> <h3>確定要重置嗎?</h3></div> <div class="modal-footer justify-content-center"><button type="button" class="mybtn bg-secondary text-white px-4 mx-1">取消</button> <button type="button" class="mybtn bg-info text-white px-4 mx-1">重置</button></div></div></div></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content mx-auto" style="width: unset;"><div class="modal-body text-center"><img src="http://www.mosme.net/homework/start?code=FVLWA&amp;type=start&amp;remark=%E8%8E%8A%D2%89%CD%A0%CD%9C%E5%AE%B6%D2%89%CC%95%CD%9C%E9%96%94%D2%89%CC%95%CC%A7&amp;remark2=813007&amp;subgroupid=AD3E96C3-5D93-4424-8ADA-7E412FA0727B&amp;returnid=29b8f198-1c35-4661-bea7-469c507902cd&amp;subgroupcode=076377" alt="" class="w-100"></div> <i class="fas fa-times-circle close_modal"></i></div></div></div></div><div class="bg-white question-card mb-4 p-3"><div class="d-flex justify-content-between mb-2"><div><span>4. </span> <span>運用「即時模式」完成程式，當綠旗點一下，Halocode光環板開始偵測傾斜方向，往上、下、左、右四個方向傾斜，相應邊的1顆燈會亮紅光；保持水平則不亮燈。 <br><img class="lazy" alt="圖檔" cx="2990850" cy="2552700" style="width:299.085px;height:255.27px;vertical-align:middle" src="./MOSME 寫作業_files/13038d19-94b4-40a6-820f-aae82c07db5e.png"><b> </b><br><b>程式執行方式：</b>切換在即時模式<img class="lazy" alt="圖檔" cx="1333500" cy="638175" style="width:133.35px;height:63.8175px;vertical-align:middle" src="./MOSME 寫作業_files/4d28d1bb-0d79-4248-b5a7-f01b20b5151b.png">，點一下綠旗<img class="lazy" alt="圖檔" cx="466725" cy="485775" style="width:46.6725px;height:48.5775px;vertical-align:middle" src="./MOSME 寫作業_files/06be3947-db7a-4883-b84a-7d2577de930e.png">，程式就開始執行，依據Halocode光環板傾斜方向，顯示燈號。</span></div> <div class="fz20 nowrap"><i class="fas fa-undo-alt mr-1"></i> <i class="far fa-bookmark pointer"></i></div></div> <div class="border p-2 rounded"><div contenteditable="true" class="textarea"></div> <div class="mt-3"><div class="row"></div></div></div> <div class="d-flex justify-content-end align-items-center pt-2"><span class="text-muted fz14 mr-2">上傳檔案</span> <label class="upload"><input type="file" multiple="multiple" accept=".jpg,.png,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.pdf" class="d-none"> <i class="fas fa-file-alt"></i></label></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body text-center"><h3 class="text-danger">作答將被清空</h3> <h3>確定要重置嗎?</h3></div> <div class="modal-footer justify-content-center"><button type="button" class="mybtn bg-secondary text-white px-4 mx-1">取消</button> <button type="button" class="mybtn bg-info text-white px-4 mx-1">重置</button></div></div></div></div> <div class="modal fade vuemodal" style="display: none;"><div role="document" class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content mx-auto" style="width: unset;"><div class="modal-body text-center"><img src="http://www.mosme.net/homework/start?code=FVLWA&amp;type=start&amp;remark=%E8%8E%8A%D2%89%CD%A0%CD%9C%E5%AE%B6%D2%89%CC%95%CD%9C%E9%96%94%D2%89%CC%95%CC%A7&amp;remark2=813007&amp;subgroupid=AD3E96C3-5D93-4424-8ADA-7E412FA0727B&amp;returnid=29b8f198-1c35-4661-bea7-469c507902cd&amp;subgroupcode=076377" alt="" class="w-100"></div> <i class="fas fa-times-circle close_modal"></i></div></div></div></div></div></main></div> <!----></div>
    <script src="./MOSME 寫作業_files/loading-animation.js.下載"></script>
    <script src="./MOSME 寫作業_files/jquery-1.11.3.min.js.下載"></script>
    <script src="./MOSME 寫作業_files/base64.js.下載"></script>
    <script src="./MOSME 寫作業_files/psacommon.js.下載"></script>
    <script src="./MOSME 寫作業_files/vue.min.js.下載"></script>
    <!--填充題 component HTML-->
    <script type="text/x-template" id="fillBlank">
        <div class="bg-white question-card mb-4">
            <!-- 題目 -->
            <div class="d-flex justify-content-between p-3">
                <div>
                    <span>{{order}}. </span>
                    <span ref="topic">
                        <!-- <span class="m-0">若蓄電池的充電電流為</span>
                        <span class="m-0 fill_blank" v-on:keydown.enter.prevent="" v-on:blur="backToFront()" contenteditable></span>
                        <span class="m-0">若蓄電池的充電電流為</span>
                        <span class="m-0 fill_blank" v-on:keydown.enter.prevent="" v-on:blur="backToFront()" contenteditable></span>
                        <span class="m-0">若蓄電池的充電電流為。</span> -->
                    </span>
                </div>
                <div class="fz20 nowrap">
                    <i class="fas fa-undo-alt mr-1" :class="{question_reset: isResetable}" v-on:click="openResetModal()"></i>
                    <i class="far fa-bookmark pointer" :class="[{'fas':isRemarked},{'text-warning':isRemarked}]" v-on:click="toggleRemark()"></i>
                </div>
            </div>
            <!-- end: 題目 -->
            <transition name="modalshow">
                <div class="modal fade vuemodal" v-show="isShowResetModal" v-on:click.self="closeResetModal()">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-body text-center">
                                <h3 class="text-danger">作答將被清空</h3>
                                <h3>確定要重置嗎?</h3>
                            </div>
                            <div class="modal-footer justify-content-center">
                                <button type="button" class="mybtn bg-secondary text-white px-4 mx-1" v-on:click="closeResetModal()">取消</button>
                                <button type="button" class="mybtn bg-info text-white px-4 mx-1" v-on:click="resetAnswer();closeResetModal()">重置</button>
                            </div>
                        </div>
                    </div>
                </div>
            </transition>
        </div>
    </script>
    <!--END:填充題 component HTML-->
    <!--問答題 component HTML-->
    <script type="text/x-template" id="shortAnswer">
        <div class="bg-white question-card mb-4 p-3">
            <!-- 題目 -->
            <div class="d-flex justify-content-between mb-2">
                <div>
                    <span>{{order}}. </span>
                    <span v-html="topic">
                        <!-- 題目題目題目題目題目題目題目題目題目題目題目題目題目題目題目題目題目題目 -->
                    </span>
                </div>
                <div class="fz20 nowrap">
                    <i class="fas fa-undo-alt mr-1" :class="{question_reset: isResetable}" v-on:click="openResetModal()"></i>
                    <i class="far fa-bookmark pointer" :class="[{'fas':isRemarked},{'text-warning':isRemarked}]" v-on:click="toggleRemark()"></i>
                </div>
            </div>
            <!-- end: 題目 -->
            <div class="border p-2 rounded">
                <div class="textarea" ref="text" v-on:paste="pasteAsPlainText()" contenteditable></div>
                <div class="mt-3" :class="{'border-top': files.length>0}">
                    <div class="row">
                        <div class="col-lg-3 col-sm-4 col-6" v-for="(file,index) in files">
                            
                            <div class="file_attached" v-if="['jpg','jpeg','png'].includes(file.extname)">
                                <img :id="id + index" :src="(file.imageurl==''?loadImageSrc(id + index,file):file.imageurl)" class="w-100 h-100" v-on:click="openImgModal(file)" alt="attached image">
                                <span class="remove_file" v-on:click="removeFile(index);"></span>
                            </div>
                            
                            <div class="file_attached d-flex flex-column border rounded" v-else>
                                <div class="d-flex align-items-center justify-content-center w-100 h-100">
                                    <span class="badge badge_word" v-if="['docx','doc'].includes(file.extname)">WORD</span>
                                    <span class="badge badge_pdf" v-else-if="['pdf'].includes(file.extname)">PDF</span>
                                    <span class="badge badge_ppt" v-else-if="['pptx','ppt'].includes(file.extname)">PPT</span>
                                    <span class="badge badge_excel" v-else-if="['xls','xlsx'].includes(file.extname)">EXCEL</span>
                                    <span class="badge badge_other" v-else >{{file.extname.toUpperCase()}}</span>
                                </div>
                                <div class="p-1">
                                    <p class="mb-0 line-clamp-2 fz14" v-text="file.file.name">檔案名稱</p>
                                </div>
                                <span class="remove_file" v-on:click="removeFile(index)"></span>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end align-items-center pt-2">
                <span class="text-muted fz14 mr-2">上傳檔案</span>
                
                <label class="upload">
                    <input type="file" multiple accept=".jpg,.png,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.pdf" class="d-none" v-on:change="uploadFile(id)">
                    <i class="fas fa-file-alt"></i>
                </label>
            </div>
            <!--Modal: 重置作答-->
            <transition name="modalshow">
                <div class="modal fade vuemodal" v-show="isShowResetModal" v-on:click.self="closeResetModal()">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-body text-center">
                                <h3 class="text-danger">作答將被清空</h3>
                                <h3>確定要重置嗎?</h3>
                            </div>
                            <div class="modal-footer justify-content-center">
                                <button type="button" class="mybtn bg-secondary text-white px-4 mx-1" v-on:click="closeResetModal()">取消</button>
                                <button type="button" class="mybtn bg-info text-white px-4 mx-1" v-on:click="resetAnswer();closeResetModal()">重置</button>
                            </div>
                        </div>
                    </div>
                </div>
            </transition>
            <!--Modal: 重置作答-->
            <!--Modal: 圖片-->
            <transition name="modalshow">
                <div class="modal fade vuemodal" v-show="isShowImgModal" v-on:click.self="closeImgModal()">
                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                        <div class="modal-content mx-auto" style="width:unset;">
                            <div class="modal-body text-center">
                                <img :src="imgModalSrc" class="w-100" alt="">
                            </div>
                            <i class="fas fa-times-circle close_modal" v-on:click="closeImgModal()"></i>
                        </div>
                    </div>
                </div>
            </transition>
            <!--Modal: 圖片-->
        </div>
    </script>
    <!--END: 問答題 component HTML-->
    <script>
        var examCode = 'FVLWA';
        var type = 'start';
        var subgroupid = 'AD3E96C3-5D93-4424-8ADA-7E412FA0727B';
        var remark = '莊҉͜͠家҉̕͜閔҉̧̕';
        var remark2 = '813007';
        var teacherid='29b8f198-1c35-4661-bea7-469c507902cd'
        var subgroupcode='076377'

    Vue.component('fill-blank',{
    template: "#fillBlank",
    props: {
        topic: String,
        id: String,
        order: String
    },
    data: function(){
        return{
        answers: [],
        isShowResetModal: false,
        isRemarked: false
        }
    },
    mounted:function(){
        this.setUpTopic();
    },
    watch:{
        answers:{
            handler: function(){
                //把component的資料傳出去
                this.$emit('pass-answer',this.answers,this.id);
            },
            immediate: true
        }
    },
    computed: {
        isResetable: function(){
        return !this.answers.every((answer)=>{
            return answer == '';
        })
        }
    },
    methods:{
        backToFront: function(){
            event.target.scrollTo(0,0);
        },
        setUpTopic: function(){
            var topicElement = this.$refs.topic;
            var topicString = this.topic;

            var reg = /_+/g;
            var topicHTML = topicString.replace(reg,'<span class="m-0 fill_blank js-fill-blank" contenteditable></span>');
            topicElement.innerHTML = topicHTML;
            var blanks = topicElement.querySelectorAll('.js-fill-blank');
            blanks.forEach((blank,index)=>{
                blank.addEventListener('blur',this.backToFront);
                blank.addEventListener('keydown',function(){
                    if(window.event.keyCode == 13){
                        event.preventDefault();
                    }
                });
                this.answers[index] = '';
                blank.addEventListener('input',()=>{
                    this.answers.splice(index,1,blank.innerText);
                })
            })
        },
        resetAnswer: function(){
            var topicElement = this.$refs.topic;
            topicElement.querySelectorAll('.js-fill-blank').forEach((blank,index)=>{
                blank.innerHTML = '';
                this.answers.splice(index,1,'')
            });
        },
        openResetModal: function(){
            if(this.isResetable){
                this.isShowResetModal = true;
            }
        },
        closeResetModal: function(){
            this.isShowResetModal = false;
        },
        toggleRemark: function(){
            this.isRemarked = !this.isRemarked;
            this.$emit('toggle-remark',this.isRemarked,this.id,'fb');
        }
    }
    });

    Vue.component('short-answer',{
        template:"#shortAnswer",
        props: {
            topic: String,
            id: String,
            order: String
        },
        data: function(){
            return {
            text: '',
            files:[],
            isShowResetModal: false,
            isShowImgModal: false,
            imgModalSrc: '',
            isRemarked: false
            }
        },
        computed: {
            isResetable: function(){
                if(this.text !== '' || this.files.length>0){
                    return true;
                }
                else{
                    return false;
                }
            }
        },
        watch:{
            files:{
                handler: function(){
                    this.$emit('pass-answer',this.files,this.id,'file');
                }
            },
            text:{
                handler: function(){
                    this.$emit('pass-answer',this.text,this.id,'text');
                }
            }
        },
        mounted: function(){
            this.$refs.text.addEventListener('input',()=>{
            this.text = this.$refs.text.innerHTML;
            })
        },
        methods:{
            uploadFile: function(id){
                var files = event.target.files;
                var limit_files_num = 3;
                var uploaded_num = this.files.length;
                if(files.length > limit_files_num - uploaded_num){
                    alert(`最多上傳${limit_files_num}個檔案`);
                    return false;
                }

                for (i = 0; i < files.length; i++){
                    var index = i;
                    var file = files[i];
                    // 檔案上限 5 MB (5,242,880 bites)
                    if (file.size <= 5242880) {
                        var extname = file.name.split('.').pop();
                        this.files.push({ questionId: id, file: file, extname: extname.toLowerCase(), imageurl:''});
                    }
                    else{
                        alert('檔案大小不能超過5MB<div style="font-weight: bold;text-decoration: underline">${file.name}</div>');
                    }
                }
                event.target.value = '';
            },
            loadImageSrc: function (id, file) {
                const reader = new FileReader();

                reader.addEventListener("load", function () {
                    $("#" + id).attr("src", reader.result);
                    file.imageurl = reader.result;
                }, false);

                if (file.file) {
                    reader.readAsDataURL(file.file);
                }
            },
            removeFile: function(index){
                this.files.splice(index,1);
            },
            openResetModal: function(){
                if(this.isResetable){
                    this.isShowResetModal = true;
                }
            },
            closeResetModal: function(){
                this.isShowResetModal = false;
            },
            openImgModal: function(file){
                this.isShowImgModal = true;
                this.imgModalSrc = file.imageurl;
            },
            closeImgModal: function(){
                this.isShowImgModal = false;
            },
            resetAnswer: function(){
                var textElement = this.$refs.text;
                textElement.innerHTML = '';
                this.text= '';
                this.files = [];
            },
            toggleRemark: function(){
                this.isRemarked = !this.isRemarked;
                this.$emit('toggle-remark',this.isRemarked,this.id,'sa');
            },
            pasteAsPlainText: function(){
                event.preventDefault();
                var text = event.clipboardData.getData('text/plain');
                // 複製貼上的也要當作有作答
                this.text += text;

                const range = document.getSelection().getRangeAt(0);
                range.deleteContents();

                const textNode = document.createTextNode(text);
                range.insertNode(textNode);
                range.selectNodeContents(textNode);
                range.collapse(false);

                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }
    })
    </script>
    <script src="./MOSME 寫作業_files/lazyload.js.下載"></script>
    <script src="./MOSME 寫作業_files/homework.js.下載"></script>



</body></html>